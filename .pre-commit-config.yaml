repos:
  # ---------- Black (code formatter) ----------
  - repo: local
    hooks:
      - id: black
        name: Run Black (code formatter)
        entry: scripts/run_black.sh
        language: system # run the script directly, no virtualenv
        types: [python] # only run on .py files
        stages: [pre-commit] # default – runs on pre‑commit

  # ---------- isort (import sorter) ----------
  - repo: local
    hooks:
      - id: isort
        name: Run isort (import sorter)
        entry: scripts/run_isort.sh
        language: system
        types: [python]
        stages: [pre-commit]

  # ---------- Ruff (lint + autofix) ----------
  - repo: local
    hooks:
      - id: ruff
        name: Run Ruff (linter + autofix)
        entry: scripts/run_ruff.sh
        language: system
        types: [python]
        stages: [pre-commit]

  # ---------- Pytest ---------------------------
  - repo: local
    hooks:
      - id: run-tests-before-push
        name: Run pytest suite before push
        entry: bash -c 'PYTHONPATH=$(pwd) pytest -q'
        language: system
        stages: [pre-push]

  # ----------- Detect secrets ------------------
  - repo: local
    hooks:
      - id: detect-secrets
        name: Detect secrets before push
        entry: detect-secrets-hook
        language: python
        # Use the same interpreter that runs pre‑commit (your venv/Poetry env)
        additional_dependencies: [detect-secrets==1.5.0] # optional pin
        stages: [pre-push] # <-- makes it a pre‑push hook
        args: [--baseline, .secrets.baseline]
